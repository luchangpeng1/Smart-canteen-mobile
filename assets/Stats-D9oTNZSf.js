import{m as i,o as V,G as Y,q as w,t as s,b as n,J as b,L as z,w as l,af as O,e as d,a as u,c as D,D as v,M as $,r as A,y as _}from"./vendor-DLSupzTO.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"mobile-stats"},L={class:"page-header"},U={class:"stat-cards"},E={class:"stat-content"},N={class:"stat-info"},T={class:"stat-title"},q={class:"stat-value"},G={class:"chart-header"},J={__name:"Stats",setup(R){const m=i("week"),c=i(null);let a=null;const r=i(new Date().toISOString().split("T")[0]),p=i([]),y=t=>t>new Date,M=async t=>{t||(t=new Date().toISOString().split("T")[0]),await f(t)},f=async t=>{try{const e={revenue:Math.floor(Math.random()*1e4),orders:Math.floor(Math.random()*200),customers:Math.floor(Math.random()*1500),averageOrder:Math.floor(Math.random()*100)};p.value=[{title:`${t===r.value?"今日":""}营业额`,value:`¥${e.revenue.toFixed(2)}`,trend:12.5},{title:`${t===r.value?"今日":""}订单数`,value:e.orders.toString(),trend:8.2},{title:`${t===r.value?"今日":""}客流量`,value:e.customers.toString(),trend:-3.5},{title:"平均客单价",value:`¥${e.averageOrder.toFixed(2)}`,trend:5.8}]}catch(e){console.error("获取统计数据失败:",e)}},x=()=>{if(!c.value)return;a=O(c.value);const t={tooltip:{trigger:"axis"},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"line",smooth:!0}]};a.setOption(t)};return V(async()=>{await f(r.value),x(),window.addEventListener("resize",()=>a==null?void 0:a.resize())}),Y(()=>{a==null||a.dispose(),window.removeEventListener("resize",()=>a==null?void 0:a.resize())}),(t,e)=>{const k=d("el-date-picker"),S=d("el-icon"),h=d("el-card"),g=d("el-radio-button"),C=d("el-radio-group");return u(),w("div",F,[s("div",L,[e[2]||(e[2]=s("h2",null,"营业统计",-1)),n(k,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),type:"date",size:"small",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","disabled-date":y,onChange:M},null,8,["modelValue"])]),s("div",U,[(u(!0),w(b,null,z(p.value,o=>(u(),D(h,{key:o.title,class:"stat-card"},{default:l(()=>[s("div",E,[s("div",N,[s("div",T,v(o.title),1),s("div",q,v(o.value),1)]),s("div",{class:$(["stat-trend",{up:o.trend>0,down:o.trend<0}])},[n(S,null,{default:l(()=>[(u(),D(A(o.trend>0?"ArrowUp":"ArrowDown")))]),_:2},1024),_(" "+v(Math.abs(o.trend))+"% ",1)],2)])]),_:2},1024))),128))]),n(h,{class:"chart-card"},{header:l(()=>[s("div",G,[e[5]||(e[5]=s("span",null,"营业趋势",-1)),n(C,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),size:"small"},{default:l(()=>[n(g,{value:"week"},{default:l(()=>e[3]||(e[3]=[_("周")])),_:1}),n(g,{value:"month"},{default:l(()=>e[4]||(e[4]=[_("月")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[s("div",{ref_key:"trendChart",ref:c,class:"chart"},null,512)]),_:1})])}}},K=B(J,[["__scopeId","data-v-c58d9e83"]]);export{K as default};
