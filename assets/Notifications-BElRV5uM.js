import{m as v,S as A,q as o,t as a,b as i,w as r,J as H,L as V,c as y,E as F,e as u,a as l,u as I,ak as L,y as D,M as g,D as d,d as w,r as $,F as j,ag as N,U as x,aq as J,A as G}from"./vendor-CrV3p34f.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"notifications-container"},P={class:"page-header"},Q={class:"message-tabs"},W=["onClick"],X={key:0,class:"message-list"},Z=["onClick"],ee={class:"message-icon"},te={class:"message-content"},se={class:"message-title"},ae={class:"message-desc"},le={class:"message-time"},ne={key:0,class:"message-status"},oe={class:"message-detail"},ie={class:"detail-time"},de={class:"detail-content"},ce={__name:"Notifications",setup(re){const B=j(),h=[{name:"全部",type:"all",unread:5},{name:"订单",type:"order",unread:2},{name:"系统",type:"system",unread:3},{name:"活动",type:"activity",unread:0}],m=v("all"),c=v([{id:1,type:"order",title:"新订单通知",content:"您有一个新的订单待处理，订单号：2024032001",time:"2024-03-20 14:30:00",isRead:!1},{id:2,type:"system",title:"系统维护通知",content:"系统将于今晚24:00-次日凌晨2:00进行例行维护，请提前做好准备。",time:"2024-03-20 10:00:00",isRead:!1},{id:3,type:"activity",title:"活动提醒",content:"您的店铺已被选中参加本周末的美食节活动，请及时确认参与。",time:"2024-03-19 16:20:00",isRead:!0},{id:4,type:"order",title:"退款申请",content:"订单2024031902申请退款，请及时处理。",time:"2024-03-19 15:30:00",isRead:!1},{id:5,type:"system",title:"账户安全提醒",content:"检测到您的账户在新设备上登录，如非本人操作，请及时修改密码。",time:"2024-03-19 14:20:00",isRead:!1}]),k=A(()=>m.value==="all"?c.value:c.value.filter(s=>s.type===m.value)),_=v(null),f=v(!1),E=()=>{B.push("/m/admin/profile")},S=()=>{c.value.forEach(s=>{s.isRead=!0}),R(),F.success("已全部标记为已读")},T=s=>{_.value=s,f.value=!0,s.isRead||(s.isRead=!0,R())},R=()=>{h.forEach(s=>{s.type==="all"?s.unread=c.value.filter(e=>!e.isRead).length:s.unread=c.value.filter(e=>e.type===s.type&&!e.isRead).length})},Y=s=>({order:J,system:G,activity:N})[s]||N,C=s=>{if(!s)return"";const e=x(s),n=x();return e.isSame(n,"day")?e.format("HH:mm"):e.isSame(n.subtract(1,"day"),"day")?"昨天 "+e.format("HH:mm"):e.isSame(n,"year")?e.format("MM-DD HH:mm"):e.format("YYYY-MM-DD HH:mm")};return(s,e)=>{var b;const n=u("el-icon"),M=u("el-button"),U=u("el-badge"),q=u("el-empty"),z=u("el-dialog");return l(),o("div",O,[a("div",P,[i(M,{class:"back-button",link:"",onClick:E},{default:r(()=>[i(n,null,{default:r(()=>[i(I(L))]),_:1})]),_:1}),e[2]||(e[2]=a("span",{class:"page-title"},"消息通知",-1)),i(M,{class:"read-all-button",link:"",onClick:S},{default:r(()=>e[1]||(e[1]=[D(" 全部已读 ")])),_:1})]),a("div",Q,[(l(),o(H,null,V(h,t=>a("div",{key:t.type,class:g(["tab-item",{active:m.value===t.type}]),onClick:p=>m.value=t.type},[D(d(t.name)+" ",1),t.unread>0?(l(),y(U,{key:0,value:t.unread,class:"tab-badge"},null,8,["value"])):w("",!0)],10,W)),64))]),k.value.length>0?(l(),o("div",X,[(l(!0),o(H,null,V(k.value,t=>(l(),o("div",{key:t.id,class:g(["message-item",{unread:!t.isRead}]),onClick:p=>T(t)},[a("div",ee,[i(n,{class:g(t.type)},{default:r(()=>[(l(),y($(Y(t.type))))]),_:2},1032,["class"])]),a("div",te,[a("div",se,d(t.title),1),a("div",ae,d(t.content),1),a("div",le,d(C(t.time)),1)]),t.isRead?w("",!0):(l(),o("div",ne,e[3]||(e[3]=[a("div",{class:"unread-dot"},null,-1)])))],10,Z))),128))])):(l(),y(q,{key:1,description:"暂无消息","image-size":120})),i(z,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),title:(b=_.value)==null?void 0:b.title,width:"90%","close-on-click-modal":!1,class:"message-detail-dialog"},{default:r(()=>{var t,p;return[a("div",oe,[a("div",ie,d(C((t=_.value)==null?void 0:t.time)),1),a("div",de,d((p=_.value)==null?void 0:p.content),1)])]}),_:1},8,["modelValue","title"])])}}},_e=K(ce,[["__scopeId","data-v-16176a20"]]);export{_e as default};
