import{m as v,p as ee,S as ae,q as i,t as u,b as l,w as t,J as w,L as D,c as b,e as n,a as o,u as h,au as le,a0 as te,D as C,y as p,d as k,aw as oe,M as U,r as ne,A as se,F as ue,E as B,W as ce}from"./vendor-MJUihXSy.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={class:"bank-accounts-container"},re={class:"page-header"},me={key:0,class:"accounts-list"},pe={class:"account-info"},_e=["src","alt"],fe={class:"account-detail"},ve={class:"bank-name"},be={class:"account-number"},ke={class:"account-actions"},ye={key:0,class:"account-type-selector"},ge=["onClick"],Ne={class:"type-name"},we={key:2,class:"wechat-bind-tip"},Ce={class:"qrcode-container"},Ve={class:"qrcode-placeholder"},he={class:"dialog-footer"},E="https://example.com/wechat-qr.png",Be={__name:"BankAccounts",setup(Ae){const M=ue(),_=v([{id:1,bank:"工商银行",accountNumber:"**** **** **** 8888",icon:"/icons/icbc.png",isDefault:!0},{id:2,bank:"支付宝",accountNumber:"138****8888",icon:"/icons/alipay.png",isDefault:!1}]),R=[{label:"银行卡",value:"bank",icon:"CreditCard"},{label:"支付宝",value:"alipay",icon:"Money"},{label:"微信",value:"wechat",icon:"ChatDotRound"}],$=[{code:"ICBC",name:"工商银行"},{code:"ABC",name:"农业银行"},{code:"BOC",name:"中国银行"},{code:"CCB",name:"建设银行"},{code:"CMB",name:"招商银行"}],y=v(!1),r=v(1),c=v(""),A=v(!1),g=v(null),s=ee({bankName:"",holderName:"",accountNumber:"",alipayAccount:"",realName:""}),z={bankName:[{required:!0,message:"请选择开户银行"}],holderName:[{required:!0,message:"请输入持卡人姓名"}],accountNumber:[{required:!0,message:"请输入银行卡号"},{pattern:/^\d{16,19}$/,message:"请输入正确的银行卡号"}],alipayAccount:[{required:!0,message:"请输入支付宝账号"},{type:"email",message:"请输入正确的邮箱格式"}],realName:[{required:!0,message:"请输入真实姓名"}]},S=ae(()=>r.value===1?"添加收款账户":c.value==="bank"?"添加银行卡":c.value==="alipay"?"绑定支付宝":"绑定微信"),F=()=>{M.push("/m/admin/profile")},q=()=>{r.value=1,c.value="",y.value=!0,g.value&&g.value.resetFields()},L=m=>{c.value=m},I=async()=>{if(r.value===1){if(!c.value){B.warning("请选择账户类型");return}r.value=2;return}if(g.value)try{await g.value.validate(),A.value=!0,await new Promise(e=>setTimeout(e,1e3));const m={id:Date.now(),bank:c.value==="bank"?s.bankName:c.value==="alipay"?"支付宝":"微信",accountNumber:c.value==="bank"?`**** **** **** ${s.accountNumber.slice(-4)}`:s.alipayAccount||"",icon:`/icons/${c.value}.png`,isDefault:_.value.length===0};_.value.push(m),B.success("添加成功"),y.value=!1,r.value=1}catch(m){console.error("添加失败：",m)}finally{A.value=!1}},P=()=>{r.value=1},J=async(m,e)=>{if(m==="setDefault")_.value.forEach(d=>{d.isDefault=d.id===e.id}),B.success("设置成功");else if(m==="delete")try{await ce.confirm("确定要删除该账户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),_.value=_.value.filter(d=>d.id!==e.id),B.success("删除成功")}catch{}};return(m,e)=>{const d=n("el-icon"),f=n("el-button"),O=n("el-tag"),x=n("el-dropdown-item"),Q=n("el-dropdown-menu"),W=n("el-dropdown"),j=n("el-empty"),G=n("el-option"),H=n("el-select"),N=n("el-form-item"),V=n("el-input"),K=n("el-alert"),X=n("el-image"),Y=n("el-form"),Z=n("el-dialog");return o(),i("div",ie,[u("div",re,[l(f,{class:"back-button",link:"",onClick:F},{default:t(()=>[l(d,null,{default:t(()=>[l(h(le))]),_:1})]),_:1}),e[7]||(e[7]=u("span",{class:"page-title"},"收款账户",-1)),l(f,{class:"add-button",link:"",onClick:q},{default:t(()=>[l(d,null,{default:t(()=>[l(h(te))]),_:1})]),_:1})]),_.value.length>0?(o(),i("div",me,[(o(!0),i(w,null,D(_.value,a=>(o(),i("div",{key:a.id,class:"account-item"},[u("div",pe,[u("img",{src:a.icon,alt:a.bank,class:"bank-icon"},null,8,_e),u("div",fe,[u("div",ve,C(a.bank),1),u("div",be,C(a.accountNumber),1)])]),u("div",ke,[a.isDefault?(o(),b(O,{key:0,size:"small",type:"success",class:"default-tag"},{default:t(()=>e[8]||(e[8]=[p(" 默认 ")])),_:1})):k("",!0),l(W,{trigger:"click",onCommand:T=>J(T,a)},{dropdown:t(()=>[l(Q,null,{default:t(()=>[a.isDefault?k("",!0):(o(),b(x,{key:0,command:"setDefault"},{default:t(()=>e[9]||(e[9]=[p(" 设为默认 ")])),_:1})),l(x,{command:"delete",class:"danger"},{default:t(()=>e[10]||(e[10]=[p(" 删除账户 ")])),_:1})]),_:2},1024)]),default:t(()=>[l(f,{type:"primary",link:""},{default:t(()=>[l(d,null,{default:t(()=>[l(h(oe))]),_:1})]),_:1})]),_:2},1032,["onCommand"])])]))),128))])):(o(),b(j,{key:1,description:"暂无绑定账户","image-size":120},{default:t(()=>[l(f,{type:"primary",onClick:q},{default:t(()=>e[11]||(e[11]=[p("添加账户")])),_:1})]),_:1})),l(Z,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=a=>y.value=a),title:S.value,width:"90%","close-on-click-modal":!1,class:"add-account-dialog"},{footer:t(()=>[u("div",he,[r.value===2?(o(),b(f,{key:0,onClick:P},{default:t(()=>e[13]||(e[13]=[p("上一步")])),_:1})):k("",!0),l(f,{onClick:e[5]||(e[5]=a=>y.value=!1)},{default:t(()=>e[14]||(e[14]=[p("取消")])),_:1}),l(f,{type:"primary",onClick:I,loading:A.value},{default:t(()=>[p(C(r.value===1?"下一步":"确认绑定"),1)]),_:1},8,["loading"])])]),default:t(()=>[r.value===1?(o(),i("div",ye,[(o(),i(w,null,D(R,a=>u("div",{key:a.value,class:U(["type-item",{active:c.value===a.value}]),onClick:T=>L(a.value)},[l(d,{class:U(["type-icon",a.value])},{default:t(()=>[(o(),b(ne(a.icon)))]),_:2},1032,["class"]),u("span",Ne,C(a.label),1)],10,ge)),64))])):(o(),b(Y,{key:1,ref_key:"formRef",ref:g,model:s,rules:z,"label-position":"top"},{default:t(()=>[c.value==="bank"?(o(),i(w,{key:0},[l(N,{label:"开户银行",prop:"bankName"},{default:t(()=>[l(H,{modelValue:s.bankName,"onUpdate:modelValue":e[0]||(e[0]=a=>s.bankName=a),placeholder:"请选择开户银行"},{default:t(()=>[(o(),i(w,null,D($,a=>l(G,{key:a.code,label:a.name,value:a.code},{default:t(()=>[p(C(a.name),1)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(N,{label:"持卡人姓名",prop:"holderName"},{default:t(()=>[l(V,{modelValue:s.holderName,"onUpdate:modelValue":e[1]||(e[1]=a=>s.holderName=a),placeholder:"请输入持卡人姓名"},null,8,["modelValue"])]),_:1}),l(N,{label:"银行卡号",prop:"accountNumber"},{default:t(()=>[l(V,{modelValue:s.accountNumber,"onUpdate:modelValue":e[2]||(e[2]=a=>s.accountNumber=a),placeholder:"请输入银行卡号"},null,8,["modelValue"])]),_:1})],64)):k("",!0),c.value==="alipay"?(o(),i(w,{key:1},[l(N,{label:"支付宝账号",prop:"alipayAccount"},{default:t(()=>[l(V,{modelValue:s.alipayAccount,"onUpdate:modelValue":e[3]||(e[3]=a=>s.alipayAccount=a),placeholder:"请输入支付宝账号"},null,8,["modelValue"])]),_:1}),l(N,{label:"真实姓名",prop:"realName"},{default:t(()=>[l(V,{modelValue:s.realName,"onUpdate:modelValue":e[4]||(e[4]=a=>s.realName=a),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1})],64)):k("",!0),c.value==="wechat"?(o(),i("div",we,[l(K,{title:"请使用微信扫描下方二维码进行账号绑定",type:"info",closable:!1,center:""}),u("div",Ce,[l(X,{src:E,fit:"contain",class:"qrcode","preview-src-list":[E]},{error:t(()=>[u("div",Ve,[l(d,{size:40},{default:t(()=>[l(h(se))]),_:1}),e[12]||(e[12]=u("span",null,"二维码加载失败",-1))])]),_:1},8,["preview-src-list"])])])):k("",!0)]),_:1},8,["model"]))]),_:1},8,["modelValue","title"])])}}},xe=de(Be,[["__scopeId","data-v-b31aea9c"]]);export{xe as default};
