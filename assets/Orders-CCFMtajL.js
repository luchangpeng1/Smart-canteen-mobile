import{m as f,J as pe,$ as V,L as me,o as Ke,q as p,t,b as s,w as l,u as x,c as Y,d as k,D as d,E as h,P as E,e as m,a as c,y as v,a0 as Xe,a1 as ve,a2 as ee,N as q,O as F,M as te,a3 as _e,a4 as fe,v as he,a5 as ye,a6 as ge,F as Ze}from"./vendor-qvz31vGP.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";const tt="/Smart-canteen-mobile/assets/%E5%8F%AE%E5%92%9A-C5IQiY7P.mp3",at={class:"mobile-orders"},st={class:"tabs-wrapper"},nt={class:"history-entry"},lt={class:"filter-toolbar"},ot={key:3,class:"price-range"},it={class:"search-bar"},dt={class:"pagination-container"},ct={class:"filter-content"},rt={key:0,class:"batch-toolbar"},ut={class:"selected-count"},pt={class:"batch-actions"},mt={class:"stats-cards"},vt={class:"stat-card"},_t={class:"stat-value"},ft={class:"stat-card"},ht={class:"stat-value"},yt={class:"stat-card"},gt={class:"stat-value"},kt={class:"order-list"},bt={class:"date-header"},wt={class:"date-text"},xt={class:"order-count"},Mt={class:"order-card-header"},Ct={class:"order-basic-info"},Tt={class:"order-info"},Dt={class:"order-info-left"},Vt={class:"order-no"},$t={key:0,class:"order-meta"},Yt={class:"order-time"},zt={class:"customer-info"},Nt={class:"order-no"},St={class:"order-items"},Ot={class:"items-header"},jt={class:"order-items-grid"},Bt={key:0,class:"item-image"},Ut=["src","alt"],Et={class:"item-content"},qt={class:"item-info"},It={class:"item-name"},Lt={key:0,class:"item-specs"},Rt={class:"item-price-info"},At={class:"item-quantity"},Ft={class:"item-price"},Pt={class:"order-footer"},Ht={class:"order-total"},Qt={class:"total-info"},Wt={class:"total-price"},Jt={key:0,class:"order-remark"},Gt={class:"order-actions"},Kt={class:"order-card-header"},Xt={class:"order-basic-info"},Zt={class:"order-info"},ea={class:"order-info-left"},ta={class:"order-no"},aa={key:1,class:"order-no"},sa={key:0,class:"order-meta"},na={class:"order-time"},la={class:"customer-info"},oa={class:"student-id"},ia={class:"order-items"},da={class:"items-header"},ca={class:"order-items-grid"},ra={key:0,class:"item-image"},ua=["src","alt"],pa={class:"item-content"},ma={class:"item-info"},va={class:"item-name"},_a={key:0,class:"item-specs"},fa={class:"item-price-info"},ha={class:"item-quantity"},ya={class:"item-price"},ga={class:"order-footer"},ka={class:"order-total"},ba={class:"total-info"},wa={class:"total-price"},xa={key:0,class:"order-remark"},Ma={class:"order-actions"},Ca={key:1,class:"load-more"},Ta={key:0},Da={key:1},Va={__name:"Orders",setup($a){const ke=Ze(),C=f("pending"),b=f([]),y=f([]),I=f(!1),P=f(!1),be=f(1),B=f(10),H=f(0),Q=f(""),ae=f(!1),W=f({diningType:"",dateRange:[]}),J=f({orderCount:0,revenue:0,avgTime:0}),w=f(""),$=f(""),T=f({min:null,max:null}),z=f([]),N=f(1),se=f(0),we=[{text:"最近一周",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*7),[e,a]}},{text:"最近一月",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*30),[e,a]}},{text:"本月",value:()=>{const a=new Date;return[new Date(a.getFullYear(),a.getMonth(),1),a]}}];pe(()=>!w.value||!$.value&&w.value!=="total"?b.value:b.value.filter(a=>{switch(w.value){case"date":if(!z.value||!z.value.length)return!0;const e=V(a.createTime).format("YYYY-MM-DD"),r=z.value[0],o=z.value[1];return e>=r&&e<=o;case"orderNo":return a.orderNo.toLowerCase().includes($.value.toLowerCase());case"studentName":return a.studentName.includes($.value);case"diningType":return a.diningType===$.value;case"total":const u=T.value.min??0,_=T.value.max??1/0;return a.total>=u&&a.total<=_;default:return!0}}));const ne=a=>a.reduce((e,r)=>e+r.quantity,0),xe=()=>{J.value={orderCount:47,revenue:1268,avgTime:15}},Me=a=>["待处理","进行中"].includes(a.status),le=Array(20).fill(null).map((a,e)=>{const o=["待处理","进行中","已完成"][Math.floor(e/7)],u=o==="待处理"?Math.floor(Math.random()*30):o==="进行中"?Math.floor(Math.random()*120)+30:Math.floor(Math.random()*24*60)+150,_=[{name:"红烧肉",price:15},{name:"宫保鸡丁",price:16},{name:"鱼香肉丝",price:14},{name:"麻婆豆腐",price:12},{name:"青椒肉丝",price:13},{name:"回锅肉",price:15},{name:"水煮肉片",price:18},{name:"糖醋里脊",price:16}],g=["常规份量","加量","微辣","特辣"],M=Math.floor(Math.random()*2)+1,O=_.sort(()=>Math.random()-.5).slice(0,M).map((j,U)=>({id:e*10+U*2+1,name:j.name,quantity:Math.floor(Math.random()*2)+1,price:j.price,specs:g[Math.floor(Math.random()*g.length)]}));O.push({id:e*10+M*2,name:"米饭",quantity:Math.floor(Math.random()*2)+1,price:2,specs:Math.random()>.5?"常规份量":"大份"});const G=O.reduce((j,U)=>j+U.price*U.quantity,0),A=["不要辣","少放盐","打包带走","加饭","多放点青菜",""];return{id:String(e+1),orderNo:`DD${V().format("YYYYMMDD")}${String(e+1).padStart(3,"0")}`,status:o,createTime:V().subtract(u,"minute").valueOf(),studentName:["张三","李四","王五","赵六","钱七","孙八","周九","吴十"][Math.floor(Math.random()*8)],studentId:`2024${String(Math.floor(Math.random()*1e3)+1).padStart(4,"0")}`,diningType:Math.random()>.5?"堂食":"外带",items:O,total:G,isNew:o==="待处理"&&Math.random()>.7,remark:A[Math.floor(Math.random()*A.length)],expanded:!1}});le.sort((a,e)=>e.createTime-a.createTime);const S=async(a=!1)=>{if(!I.value)try{I.value=!0,a&&(be.value=1,b.value=[],P.value=!1);const e={pending:"待处理",processing:"进行中",completed:"已完成"},r=le.filter(g=>g.status===e[C.value]),o=(N.value-1)*B.value,u=o+B.value,_=r.slice(o,u);b.value=_,se.value=r.length,P.value=u>=r.length}catch(e){console.error(e),h.error("获取订单列表失败")}finally{I.value=!1}},Ce=a=>{B.value=a,S(!0)},Te=a=>{N.value=a,S(!0)};me(C,()=>{N.value=1,B.value=10,S(!0)});const L=a=>V(a).format("HH:mm:ss"),oe=a=>({待处理:"warning",进行:"primary",已完成:"success",已取消:"info"})[a]||"info",De=async a=>{try{await E.confirm("确定接受此订单吗？"),a.status="进行中",h.success("已接单")}catch{}},Ve=async a=>{try{const{value:e}=await E.prompt("请输入拒绝原因",{confirmButtonText:"确定",cancelButtonText:"取消"});e&&(a.status="已取消",h.success("已拒绝订单"))}catch{}},$e=async a=>{try{await E.confirm("确定完成此订单吗？"),a.status="已完成",h.success("订单已完成")}catch{}},Ye=async()=>{try{await E.confirm(`确定接受选中的 ${y.value.length} 个订单吗？`),b.value.forEach(a=>{y.value.includes(a.id)&&(a.status="进行中")}),y.value=[],h.success("批量接单成功")}catch{}},ze=async()=>{try{await E.confirm(`确定完成选中的 ${y.value.length} 个订单吗？`),b.value.forEach(a=>{y.value.includes(a.id)&&(a.status="已完成")}),y.value=[],h.success("批量完成订单成功")}catch{}},Ne=()=>{setInterval(()=>{if(Math.random()>.3&&C.value==="pending"){const a={id:`new-${Date.now()}`,orderNo:`DD${V().format("YYYYMMDD")}${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,status:"待处理",createTime:Date.now(),items:[{id:1,name:"红烧肉",quantity:1,price:15},{id:2,name:"米饭",quantity:1,price:2}],total:17,isNew:!0};b.value.unshift(a),H.value++,new Audio(tt).play()}},5e5)};Ke(()=>{S(!0),Ne(),xe()}),me(C,()=>{C.value==="pending"&&(H.value=0)});const Se=a=>{y.value=a},Oe=()=>{w.value="",$.value="",z.value=[],T.value={min:null,max:null},N.value=1,S(!0)},je=()=>{"vibrate"in navigator&&navigator.vibrate(50)},Be=async(a,e)=>{try{await updateOrderStatus(a.id,e),new Audio(statusChangeSound).play(),je(),h.success("订单状态已更新")}catch{h.error("更新���败")}},ie=a=>{a.expanded||b.value.forEach(e=>{e.id!==a.id&&(e.expanded=!1)}),a.expanded=!a.expanded},Ue=async a=>{if(!y.value.length){h.warning("请先选择订单");return}switch(a){case"print":await Ee();break;case"export":await qe();break;case"delete":await Ie();break}},Ee=async()=>{try{const e=b.value.filter(o=>y.value.includes(o.id)).map(o=>`
      订单号：${o.orderNo}
      下单时间：${L(o.createTime)}
      客户信息：${o.studentName} (${o.studentId})
      菜品明细：
      ${o.items.map(u=>`${u.name} x${u.quantity} ¥${u.price}`).join(`
`)}
      总计：¥${o.total}
      ----------------------------------------
    `).join(`
`),r=window.open("","_blank");r.document.write(`
      <pre style="font-family: monospace; padding: 20px;">
        ${e}
      </pre>
    `),r.print(),r.close(),h.success("批量打印成功")}catch{h.error("批量打印失败")}},qe=async()=>{try{const a=b.value.filter(u=>y.value.includes(u.id)),e=[["订单号","下单时间","客户姓名","学号","订单状态","用餐方式","总金额"].join(","),...a.map(u=>[u.orderNo,L(u.createTime),u.studentName,u.studentId,u.status,u.diningType,u.total].join(","))].join(`
`),r=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(r),o.download=`订单导出_${V().format("YYYYMMDD_HHmmss")}.csv`,o.click(),h.success("导出成功")}catch{h.error("导出失败")}},Ie=async()=>{try{await E.confirm(`确定要删除选中的 ${y.value.length} 个订单吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),b.value=b.value.filter(a=>!y.value.includes(a.id)),y.value=[],h.success("批量删除成功")}catch(a){a!=="cancel"&&h.error("批量删除失败")}},Le=pe(()=>{if(C.value!=="completed")return[];const a=b.value.reduce((e,r)=>{const o=V(r.createTime).format("YYYY-MM-DD");return e[o]||(e[o]=[]),e[o].push(r),e},{});return Object.entries(a).map(([e,r])=>({date:Re(e),orders:r.sort((o,u)=>u.createTime-o.createTime)})).sort((e,r)=>{const o=V(e.date,"YYYY年MM月DD日");return V(r.date,"YYYY年MM月DD日").diff(o)})}),Re=a=>{const e=V(a),r=V().startOf("day"),o=r.subtract(1,"day");return e.isSame(r,"day")?"今天":e.isSame(o,"day")?"昨天":e.format("YYYY年MM月DD日")},Ae=()=>{$.value="",z.value=[],T.value={min:null,max:null},Q.value="",S(!0)},R=()=>{if(w.value==="total"&&T.value.max&&T.value.min>T.value.max){h.warning("最小金额不能大于最大金额");return}Q.value="",N.value=1,S(!0)},de=a=>({红烧肉:"https://img.zcool.cn/community/01a9445d54c65da801211d53235317.jpg",宫保鸡丁:"https://img.zcool.cn/community/01f8c65d54c65da801211d532386f7.jpg",鱼香肉丝:"https://img.zcool.cn/community/0120465d54c65da801211d532343b4.jpg",麻婆豆腐:"https://img.zcool.cn/community/01c3c25d54c65da801211d5323cf41.jpg",青椒肉丝:"https://img.zcool.cn/community/01d9d95d54c65da801211d532358f4.jpg",回锅肉:"https://img.zcool.cn/community/01d2fd5d54c65da801211d53236875.jpg",水煮肉片:"https://img.zcool.cn/community/01b5fd5d54c65da801211d53234c67.jpg",糖醋里脊:"https://img.zcool.cn/community/01f9d65d54c65da801211d53237dc3.jpg"})[a]||"https://img.zcool.cn/community/01311f5d54c65da801211d53231984.jpg",ce=async a=>{try{const e=window.open("","_blank");e.document.write(`
      <pre style="font-family: monospace; padding: 20px;">
        订单号：${a.orderNo}
        下单时间：${L(a.createTime)}
        客户信息：${a.studentName} (${a.studentId})
        
        菜品明细：
        ${a.items.map(r=>`${r.name} x${r.quantity} ¥${r.price}`).join(`
`)}
        
        总计：¥${a.total}
      </pre>
    `),e.print(),e.close(),h.success("打印成功")}catch(e){console.error(e),h.error("打印失败")}};return(a,e)=>{const r=m("el-badge"),o=m("el-tab-pane"),u=m("el-tabs"),_=m("el-icon"),g=m("el-button"),M=m("el-option"),O=m("el-select"),G=m("el-date-picker"),A=m("el-input"),j=m("el-input-number"),U=m("el-pagination"),re=m("el-form-item"),Fe=m("el-form"),Pe=m("el-drawer"),X=m("el-dropdown-item"),He=m("el-dropdown-menu"),Qe=m("el-dropdown"),Z=m("el-col"),We=m("el-row"),K=m("el-tag"),ue=m("el-card"),Je=m("el-checkbox"),Ge=m("el-checkbox-group");return c(),p("div",at,[t("div",st,[s(u,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=n=>C.value=n),onTabChange:Be,class:"order-tabs"},{default:l(()=>[s(o,{name:"pending"},{label:l(()=>[s(r,{value:H.value,hidden:!H.value},{default:l(()=>e[15]||(e[15]=[v(" 待处理 ")])),_:1},8,["value","hidden"])]),_:1}),s(o,{label:"进行中",name:"processing"}),s(o,{label:"已完成",name:"completed"})]),_:1},8,["modelValue"]),t("div",nt,[s(g,{type:"primary",link:"",onClick:e[1]||(e[1]=n=>x(ke).push("/m/admin/order-history"))},{default:l(()=>[s(_,null,{default:l(()=>[s(x(Xe))]),_:1}),e[16]||(e[16]=v(" 历史订单 "))]),_:1})])]),t("div",lt,[s(O,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=n=>w.value=n),placeholder:"筛选条件",size:"small",style:{width:"120px"},onChange:Ae},{default:l(()=>[s(M,{label:"订单号",value:"orderNo"}),s(M,{label:"学生姓名",value:"studentName"}),s(M,{label:"用餐方式",value:"diningType"}),s(M,{label:"订单金额",value:"total"}),s(M,{label:"下单日期",value:"date"})]),_:1},8,["modelValue"]),w.value==="date"?(c(),Y(G,{key:0,modelValue:z.value,"onUpdate:modelValue":e[3]||(e[3]=n=>z.value=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small",onChange:R,style:{width:"260px"},"value-format":"YYYY-MM-DD",shortcuts:we},null,8,["modelValue"])):w.value==="orderNo"||w.value==="studentName"?(c(),Y(A,{key:1,modelValue:$.value,"onUpdate:modelValue":e[4]||(e[4]=n=>$.value=n),placeholder:`请输入${w.value==="orderNo"?"订单号":"学生姓名"}`,size:"small",clearable:"",onInput:R,style:{width:"200px"}},null,8,["modelValue","placeholder"])):w.value==="diningType"?(c(),Y(O,{key:2,modelValue:$.value,"onUpdate:modelValue":e[5]||(e[5]=n=>$.value=n),placeholder:"选择用餐方式",size:"small",clearable:"",onChange:R,style:{width:"200px"}},{default:l(()=>[s(M,{label:"堂食",value:"堂食"}),s(M,{label:"外带",value:"外带"})]),_:1},8,["modelValue"])):w.value==="total"?(c(),p("div",ot,[s(j,{modelValue:T.value.min,"onUpdate:modelValue":e[6]||(e[6]=n=>T.value.min=n),min:0,size:"small",placeholder:"最小金额",onChange:R},null,8,["modelValue"]),e[17]||(e[17]=t("span",null,"-",-1)),s(j,{modelValue:T.value.max,"onUpdate:modelValue":e[7]||(e[7]=n=>T.value.max=n),min:0,size:"small",placeholder:"最大金额",onChange:R},null,8,["modelValue"])])):k("",!0)]),t("div",it,[s(A,{modelValue:Q.value,"onUpdate:modelValue":e[8]||(e[8]=n=>Q.value=n),placeholder:"搜索订单号/学生姓名",clearable:""},{prefix:l(()=>[s(_,null,{default:l(()=>[s(x(ve))]),_:1})]),_:1},8,["modelValue"]),s(g,{type:"primary",onClick:Oe},{default:l(()=>[s(_,null,{default:l(()=>[s(x(ve))]),_:1}),e[18]||(e[18]=v(" 搜索 "))]),_:1})]),t("div",dt,[s(U,{"current-page":N.value,"onUpdate:currentPage":e[9]||(e[9]=n=>N.value=n),"page-size":B.value,"onUpdate:pageSize":e[10]||(e[10]=n=>B.value=n),"page-sizes":[10,20,30,50],total:se.value,layout:"total, sizes, prev, pager, next",onSizeChange:Ce,onCurrentChange:Te},null,8,["current-page","page-size","total"])]),s(Pe,{modelValue:ae.value,"onUpdate:modelValue":e[13]||(e[13]=n=>ae.value=n),title:"筛选条件",direction:"rtl",size:"80%"},{default:l(()=>[t("div",ct,[s(Fe,null,{default:l(()=>[s(re,{label:"用餐方式"},{default:l(()=>[s(O,{modelValue:W.value.diningType,"onUpdate:modelValue":e[11]||(e[11]=n=>W.value.diningType=n),clearable:""},{default:l(()=>[s(M,{label:"堂食",value:"堂食"}),s(M,{label:"外带",value:"外带"})]),_:1},8,["modelValue"])]),_:1}),s(re,{label:"下单时间"},{default:l(()=>[s(G,{modelValue:W.value.dateRange,"onUpdate:modelValue":e[12]||(e[12]=n=>W.value.dateRange=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),y.value.length>0?(c(),p("div",rt,[t("span",ut,"已选择 "+d(y.value.length)+" 个订单",1),t("div",pt,[s(Qe,{onCommand:Ue},{dropdown:l(()=>[s(He,null,{default:l(()=>[s(X,{command:"print"},{default:l(()=>e[20]||(e[20]=[v("批量打印")])),_:1}),s(X,{command:"export"},{default:l(()=>e[21]||(e[21]=[v("导出订单")])),_:1}),s(X,{command:"delete",divided:"",style:{color:"#F56C6C"}},{default:l(()=>e[22]||(e[22]=[v(" 批量删除 ")])),_:1})]),_:1})]),default:l(()=>[s(g,{type:"primary",size:"small"},{default:l(()=>[e[19]||(e[19]=v(" 批量处理 ")),s(_,{class:"el-icon--right"},{default:l(()=>[s(x(ee))]),_:1})]),_:1})]),_:1}),C.value==="pending"?(c(),Y(g,{key:0,type:"primary",size:"small",onClick:Ye},{default:l(()=>e[23]||(e[23]=[v(" 批量接单 ")])),_:1})):k("",!0),C.value==="processing"?(c(),Y(g,{key:1,type:"success",size:"small",onClick:ze},{default:l(()=>e[24]||(e[24]=[v(" 批量完成 ")])),_:1})):k("",!0)])])):k("",!0),t("div",mt,[s(We,{gutter:10},{default:l(()=>[s(Z,{span:8},{default:l(()=>[t("div",vt,[t("div",_t,d(J.value.orderCount),1),e[25]||(e[25]=t("div",{class:"stat-label"},"今日订单",-1))])]),_:1}),s(Z,{span:8},{default:l(()=>[t("div",ft,[t("div",ht,"¥"+d(J.value.revenue),1),e[26]||(e[26]=t("div",{class:"stat-label"},"营业额",-1))])]),_:1}),s(Z,{span:8},{default:l(()=>[t("div",yt,[t("div",gt,d(J.value.avgTime)+"分钟",1),e[27]||(e[27]=t("div",{class:"stat-label"},"平均处理",-1))])]),_:1})]),_:1})]),t("div",kt,[s(Ge,{modelValue:y.value,"onUpdate:modelValue":e[14]||(e[14]=n=>y.value=n),onChange:Se},{default:l(()=>[C.value==="completed"?(c(!0),p(q,{key:0},F(Le.value,n=>(c(),p("div",{key:n.date,class:"order-group"},[t("div",bt,[t("span",wt,d(n.date),1),t("span",xt,d(n.orders.length)+"个订单",1)]),(c(!0),p(q,null,F(n.orders,i=>(c(),Y(ue,{key:i.id,class:"order-card"},{default:l(()=>[t("div",Mt,[t("div",Ct,[t("div",Tt,[t("div",Dt,[t("span",Vt,"订单号："+d(i.orderNo),1)]),s(K,{type:oe(i.status)},{default:l(()=>[v(d(i.status),1)]),_:2},1032,["type"])]),i.expanded?(c(),p("div",$t,[t("span",Yt,d(L(i.createTime)),1),s(K,{size:"small",type:i.diningType==="堂食"?"success":"warning",class:"dining-type"},{default:l(()=>[v(d(i.diningType),1)]),_:2},1032,["type"])])):k("",!0)]),s(g,{text:"",class:"expand-btn",onClick:D=>ie(i)},{default:l(()=>[v(d(i.expanded?"收起":"展开")+" ",1),s(_,{class:te(["expand-icon",{"is-expanded":i.expanded}])},{default:l(()=>[s(x(ee))]),_:2},1032,["class"])]),_:2},1032,["onClick"])]),_e(t("div",null,[t("div",zt,[s(_,null,{default:l(()=>[s(x(he))]),_:1}),t("span",null,d(i.studentName),1),t("span",Nt,"订单号："+d(i.orderNo),1)]),t("div",St,[t("div",Ot,[e[28]||(e[28]=t("span",null,"菜品明细",-1)),t("span",null,"共"+d(ne(i.items))+"份",1)]),t("div",jt,[(c(!0),p(q,null,F(i.items,D=>(c(),p("div",{key:D.id,class:"order-item"},[D.name!=="米饭"?(c(),p("div",Bt,[t("img",{src:de(D.name),alt:D.name},null,8,Ut)])):k("",!0),t("div",Et,[t("div",qt,[t("span",It,d(D.name),1)]),D.specs?(c(),p("div",Lt,d(D.specs),1)):k("",!0),t("div",Rt,[t("span",At,"x"+d(D.quantity),1),t("span",Ft,"¥"+d(D.price),1)])])]))),128))])]),t("div",Pt,[t("div",Ht,[t("div",Qt,[e[29]||(e[29]=t("span",{class:"total-label"},"总计：",-1)),t("span",Wt,"¥"+d(i.total),1)]),i.remark?(c(),p("div",Jt,[s(_,null,{default:l(()=>[s(x(ye))]),_:1}),t("span",null,d(i.remark),1)])):k("",!0)]),t("div",Gt,[s(g,{type:"primary",size:"small",onClick:D=>ce(i),class:"print-btn"},{default:l(()=>[s(_,null,{default:l(()=>[s(x(ge))]),_:1}),e[30]||(e[30]=v(" 打印 "))]),_:2},1032,["onClick"])])])],512),[[fe,i.expanded]])]),_:2},1024))),128))]))),128)):(c(!0),p(q,{key:1},F(b.value,n=>(c(),Y(ue,{key:n.id,class:te(["order-card",{"new-order":n.isNew}])},{default:l(()=>[t("div",Kt,[t("div",Xt,[t("div",Zt,[t("div",ea,[Me(n)?(c(),Y(Je,{key:0,value:n.id},{default:l(()=>[t("span",ta,"订单号："+d(n.orderNo),1)]),_:2},1032,["value"])):(c(),p("span",aa,"订单号："+d(n.orderNo),1))]),s(K,{type:oe(n.status)},{default:l(()=>[v(d(n.status),1)]),_:2},1032,["type"])]),n.expanded?(c(),p("div",sa,[t("span",na,d(L(n.createTime)),1),s(K,{size:"small",type:n.diningType==="堂食"?"success":"warning",class:"dining-type"},{default:l(()=>[v(d(n.diningType),1)]),_:2},1032,["type"])])):k("",!0)]),s(g,{text:"",class:"expand-btn",onClick:i=>ie(n)},{default:l(()=>[v(d(n.expanded?"收起":"展开")+" ",1),s(_,{class:te(["expand-icon",{"is-expanded":n.expanded}])},{default:l(()=>[s(x(ee))]),_:2},1032,["class"])]),_:2},1032,["onClick"])]),_e(t("div",null,[t("div",la,[s(_,null,{default:l(()=>[s(x(he))]),_:1}),t("span",null,d(n.studentName),1),t("span",oa,"("+d(n.studentId)+")",1)]),t("div",ia,[t("div",da,[e[31]||(e[31]=t("span",null,"菜品明细",-1)),t("span",null,"共"+d(ne(n.items))+"份",1)]),t("div",ca,[(c(!0),p(q,null,F(n.items,i=>(c(),p("div",{key:i.id,class:"order-item"},[i.name!=="米饭"?(c(),p("div",ra,[t("img",{src:de(i.name),alt:i.name},null,8,ua)])):k("",!0),t("div",pa,[t("div",ma,[t("span",va,d(i.name),1)]),i.specs?(c(),p("div",_a,d(i.specs),1)):k("",!0),t("div",fa,[t("span",ha,"x"+d(i.quantity),1),t("span",ya,"¥"+d(i.price),1)])])]))),128))])]),t("div",ga,[t("div",ka,[t("div",ba,[e[32]||(e[32]=t("span",{class:"total-label"},"总计：",-1)),t("span",wa,"¥"+d(n.total),1)]),n.remark?(c(),p("div",xa,[s(_,null,{default:l(()=>[s(x(ye))]),_:1}),t("span",null,d(n.remark),1)])):k("",!0)]),t("div",Ma,[n.status==="待处理"?(c(),p(q,{key:0},[s(g,{type:"primary",size:"small",onClick:i=>De(n)},{default:l(()=>e[33]||(e[33]=[v(" 接单 ")])),_:2},1032,["onClick"]),s(g,{type:"danger",size:"small",onClick:i=>Ve(n)},{default:l(()=>e[34]||(e[34]=[v(" 拒绝 ")])),_:2},1032,["onClick"])],64)):n.status==="进行中"?(c(),Y(g,{key:1,type:"success",size:"small",onClick:i=>$e(n)},{default:l(()=>e[35]||(e[35]=[v(" 完成 ")])),_:2},1032,["onClick"])):k("",!0),s(g,{type:"primary",size:"small",onClick:i=>ce(n),class:"print-btn"},{default:l(()=>[s(_,null,{default:l(()=>[s(x(ge))]),_:1}),e[36]||(e[36]=v(" 打印 "))]),_:2},1032,["onClick"])])])],512),[[fe,n.expanded]])]),_:2},1032,["class"]))),128))]),_:1},8,["modelValue"])]),I.value||P.value?(c(),p("div",Ca,[I.value?(c(),p("p",Ta,"加载中...")):k("",!0),P.value?(c(),p("p",Da,"没有更多订单了")):k("",!0)])):k("",!0)])}}},Na=et(Va,[["__scopeId","data-v-9f239043"]]);export{Na as default};
