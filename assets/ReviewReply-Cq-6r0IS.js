import{m as y,o as P,E as v,q as i,t as e,b as r,w as c,D as n,c as T,d as m,J as p,L as g,F as Q,U as $,e as d,a as o,u as Y,au as G,y as f,aa as K,N as W}from"./vendor-MJUihXSy.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"review-reply-page"},ee={class:"page-header"},se={class:"page-content"},te={class:"original-review"},ae={class:"review-header"},le={class:"user-info"},oe={class:"avatar-wrapper"},ie={class:"user-name"},re={class:"user-details"},ne={class:"rating-time"},ce={class:"review-time"},de={class:"order-info"},ue={class:"order-id"},_e={class:"review-content"},ve={key:0,class:"dishes-list"},me=["src","alt"],pe={class:"dish-info"},ge={class:"dish-name"},fe={class:"dish-price"},he={class:"review-text"},we={key:1,class:"review-images"},ye={class:"image-error"},ke={key:2,class:"review-tags"},Re={class:"quick-replies"},Ve={class:"quick-reply-list"},be={class:"reply-input"},Ce={class:"page-footer"},xe={__name:"ReviewReply",setup(Ne){const k=Q();W();const a=y(null),_=y(""),h=y(!1),U=["感谢您的评价，我们会继续保持！","抱歉没有达到您的期望，我们会努力改进","谢谢您的支持，欢迎再次光临","感谢您的建议，我们会认真考虑","已收到您的反馈，我们会及时处理"];P(()=>{try{const l=localStorage.getItem("current_review");l&&(a.value=JSON.parse(l),localStorage.removeItem("current_review"))}catch(l){console.error("Error loading review:",l),v.error("加载评价数据失败"),k.back()}});const z=l=>{_.value=l},A=async()=>{if(!_.value.trim()){v.warning("请输入回复内容");return}h.value=!0;try{await new Promise(l=>setTimeout(l,1e3)),v.success("回复成功"),w()}catch{v.error("回复失败")}finally{h.value=!1}},w=()=>{k.back()},F=l=>$(l).format("YYYY-MM-DD HH:mm");return(l,t)=>{var b,C,x,N,q,B,D,E,I,M,S;const R=d("el-icon"),H=d("el-avatar"),J=d("el-rate"),L=d("el-image"),j=d("el-tag"),O=d("el-input"),V=d("el-button");return o(),i("div",Z,[e("div",ee,[e("div",{class:"header-left",onClick:w},[r(R,null,{default:c(()=>[r(Y(G))]),_:1}),t[2]||(t[2]=e("span",null,"返回",-1))]),t[3]||(t[3]=e("div",{class:"header-title"},"回复评价",-1)),t[4]||(t[4]=e("div",{class:"header-right"},null,-1))]),e("div",se,[e("div",te,[e("div",ae,[e("div",le,[e("div",oe,[r(H,{size:36,src:(b=a.value)==null?void 0:b.userAvatar},{default:c(()=>{var s,u;return[f(n((u=(s=a.value)==null?void 0:s.userName)==null?void 0:u.charAt(0)),1)]}),_:1},8,["src"]),e("span",ie,n((C=a.value)==null?void 0:C.userName),1)]),e("div",re,[e("div",ne,[a.value?(o(),T(J,{key:0,modelValue:a.value.rating,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.rating=s),disabled:"",colors:["#ffd21e","#ffd21e","#ffd21e"],size:"small"},null,8,["modelValue"])):m("",!0),e("span",ce,n(F((x=a.value)==null?void 0:x.createTime)),1)]),e("div",de,[e("span",ue,"订单号："+n((N=a.value)==null?void 0:N.orderId),1)])])])]),e("div",_e,[(B=(q=a.value)==null?void 0:q.dishes)!=null&&B.length?(o(),i("div",ve,[(o(!0),i(p,null,g(a.value.dishes,s=>(o(),i("div",{key:s.id,class:"dish-item"},[e("img",{src:s.image,alt:s.name,class:"dish-image"},null,8,me),e("div",pe,[e("span",ge,n(s.name),1),e("span",fe,"¥"+n(s.price),1)])]))),128))])):m("",!0),e("p",he,n((D=a.value)==null?void 0:D.content),1),(I=(E=a.value)==null?void 0:E.images)!=null&&I.length?(o(),i("div",we,[(o(!0),i(p,null,g(a.value.images,(s,u)=>(o(),T(L,{key:u,src:s,"preview-src-list":a.value.images,fit:"cover",class:"review-image"},{error:c(()=>[e("div",ye,[r(R,null,{default:c(()=>[r(Y(K))]),_:1})])]),_:2},1032,["src","preview-src-list"]))),128))])):m("",!0),(S=(M=a.value)==null?void 0:M.tags)!=null&&S.length?(o(),i("div",ke,[(o(!0),i(p,null,g(a.value.tags,s=>(o(),i("span",{key:s,class:"review-tag"},n(s),1))),128))])):m("",!0)])]),e("div",Re,[t[5]||(t[5]=e("div",{class:"section-title"},"快速回复",-1)),e("div",Ve,[(o(),i(p,null,g(U,s=>r(j,{key:s,class:"quick-reply-tag",onClick:u=>z(s)},{default:c(()=>[f(n(s),1)]),_:2},1032,["onClick"])),64))])]),e("div",be,[t[6]||(t[6]=e("div",{class:"section-title"},"回复内容",-1)),r(O,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),type:"textarea",rows:4,placeholder:"请输入回复内容...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])])]),e("div",Ce,[r(V,{onClick:w},{default:c(()=>t[7]||(t[7]=[f("取消")])),_:1}),r(V,{type:"primary",onClick:A,loading:h.value},{default:c(()=>t[8]||(t[8]=[f(" 确认回复 ")])),_:1},8,["loading"])])])}}},De=X(xe,[["__scopeId","data-v-fa605b62"]]);export{De as default};
